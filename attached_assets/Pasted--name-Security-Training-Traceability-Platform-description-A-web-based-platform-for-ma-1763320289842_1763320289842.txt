{
  "name": "Security Training Traceability Platform",
  "description": "A web-based platform for managing offline security training traceability. Administrators upload trainee lists via Excel, generate unique profiles, track pass/fail status, issue digital certificates with QR codes, and allow public verification via QR scan or trainee ID.",
  "version": "1.0.0",
  "author": "Your Agency Name",
  "license": "Proprietary",
  "tech_stack": {
    "frontend": "React.js with Tailwind CSS",
    "backend": "Node.js with Express.js",
    "database": "PostgreSQL (or MongoDB)",
    "file_processing": "xlsx library (Node.js) + pandas (optional Python microservice)",
    "qr_code": "qrcode.js (frontend) + QRCode (Node.js backend)",
    "certificate": "PDFKit or html-to-pdf for digital certificates",
    "hosting": "Vercel (frontend) + Render/Heroku (backend) + Supabase/PlanetScale (DB)",
    "auth": "JWT + role-based (admin only)"
  },
  "features": [
    {
      "id": "auth",
      "name": "Authentication",
      "description": "Admin-only login (email/password or OAuth). No trainee login required."
    },
    {
      "id": "trainings",
      "name": "Training Management (CRUD)",
      "description": "Create, read, update, delete training programs. Each training has: id (auto-generated UUID), name, description, date, duration, compliance standards.",
      "endpoints": [
        "POST /api/trainings",
        "GET /api/trainings",
        "GET /api/trainings/:id",
        "PATCH /api/trainings/:id",
        "DELETE /api/trainings/:id"
      ]
    },
    {
      "id": "excel_upload",
      "name": "Bulk Trainee Import via Excel",
      "description": "Upload Excel file (.xlsx) with columns: name, surname, email, phone_number, company_name, date (training date), training_name, training_id. System validates training_id exists, creates trainee profiles, assigns unique trainee_id (UUID), sets initial status to 'pending'. Generates digital certificate placeholder.",
      "validation_rules": [
        "email: valid format, unique across platform",
        "phone_number: E.164 format",
        "training_id: must exist in trainings table",
        "date: ISO format (YYYY-MM-DD)",
        "All fields required except company_name (optional)"
      ],
      "endpoint": "POST /api/trainees/upload",
      "request_body": {
        "file": "multipart/form-data Excel file",
        "training_id": "string (fallback if not in sheet)"
      },
      "response": {
        "success": true,
        "imported": 45,
        "failed": 2,
        "errors": ["Row 12: Invalid email", "Row 15: Training ID not found"]
      }
    },
    {
      "id": "trainee_crud",
      "name": "Trainee Management (CRUD per Training)",
      "description": "View, edit, delete individual trainees within a training. Update status: pending → passed/failed. Regenerate certificate on status change.",
      "endpoints": [
        "GET /api/trainings/:trainingId/trainees",
        "GET /api/trainees/:traineeId",
        "PATCH /api/trainees/:traineeId (update status, personal info)",
        "DELETE /api/trainees/:traineeId"
      ],
      "status_enum": ["pending", "passed", "failed"]
    },
    {
      "id": "certificate",
      "name": "Digital Certificate Generation",
      "description": "On status → 'passed', generate PDF certificate with: trainee full name, training name, date, training_id, issue_date, expiry_date (optional), unique certificate_id, QR code embedding verification URL: https://yourdomain.com/verify/{traineeId}",
      "template_fields": {
        "logo": "agency logo",
        "header": "Certificate of Completion",
        "body": "{name} {surname} has successfully completed the training '{training_name}' on {date}.",
        "footer": "Issued by Your Agency | Certificate ID: {certificate_id}",
        "qr_code": "bottom-right, links to /verify/{traineeId}"
      },
      "storage": "Store PDF in cloud (S3 or Supabase Storage), save URL in DB"
    },
    {
      "id": "qr_verification",
      "name": "QR Code & Public Verification",
      "description": "Public endpoint: GET /verify/:traineeId → renders HTML page or JSON with certificate details if valid and status=passed. Shows: name, training, date, issue date, QR code (for re-scan), download PDF button. Invalid/failed/pending → 'Certificate not issued or invalid'.",
      "endpoint": "GET /verify/:traineeId",
      "response_example": {
        "valid": true,
        "trainee": {
          "name": "John",
          "surname": "Doe",
          "training_name": "Building Security Compliance",
          "date": "2025-11-01",
          "issue_date": "2025-11-10",
          "certificate_url": "https://storage.../cert-abc123.pdf"
        }
      }
    },
    {
      "id": "dashboard",
      "name": "Admin Dashboard",
      "description": "Responsive UI with:",
      "sections": [
        "List of trainings (cards or table) with trainee count, passed/failed stats",
        "Training detail view: table of trainees, bulk actions (export CSV, update status), search/filter",
        "Upload Excel button",
        "Generate all certificates button (for passed trainees)",
        "Analytics: total trainees, pass rate, by company, by month"
      ]
    }
  ],
  "database_schema": {
    "trainings": {
      "id": "UUID PK",
      "name": "string",
      "description": "text",
      "created_at": "timestamp",
      "updated_at": "timestamp"
    },
    "trainees": {
      "id": "UUID PK",
      "name": "string",
      "surname": "string",
      "email": "string unique",
      "phone_number": "string",
      "company_name": "string nullable",
      "training_id": "UUID FK → trainings.id",
      "training_date": "date",
      "status": "enum: pending, passed, failed default 'pending'",
      "certificate_url": "string nullable",
      "certificate_id": "string nullable",
      "created_at": "timestamp",
      "updated_at": "timestamp"
    }
  },
  "api_routes_summary": [
    "/api/auth/login",
    "/api/trainings (CRUD)",
    "/api/trainings/:id/trainees",
    "/api/trainees/upload",
    "/api/trainees/:id",
    "/verify/:traineeId (public)"
  ],
  "security_considerations": [
    "Rate limit public /verify endpoint",
    "Validate Excel to prevent injection",
    "Sanitize all inputs",
    "HTTPS only",
    "JWT expiration 1h",
    "CORS restricted to frontend domain"
  ],
  "future_enhancements": [
    "Bulk status update via CSV",
    "Email certificate to trainee on pass",
    "Expiry dates & renewal reminders",
    "Multi-language certificates",
    "Audit log for admin actions"
  ],
  "deployment_notes": {
    "env_vars": [
      "DATABASE_URL",
      "JWT_SECRET",
      "STORAGE_BUCKET_URL",
      "FRONTEND_URL",
      "NODE_ENV"
    ],
    "excel_sample": "Provide downloadable template with headers: name,surname,email,phone_number,company_name,date,training_name,training_id"
  }
}